(function(){var t={9159:function(t,e,s){"use strict";s(5002);var n=s(2476),a=(s(5440),s(1914)),i=(s(2042),s(8521)),r=(s(9892),s(6458)),o=(s(8627),s(5641)),c=(s(3307),s(1392)),l=(s(8029),s(4951)),u=(s(2355),s(9233)),h=(s(9432),s(2591)),d=(s(5559),s(5553)),p=s(144),f=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("router-view")],1)},g=[];p.ZP.use(i.Z);var m={},v=m,y=s(1001),w=(0,y.Z)(v,f,g,!1,null,"0c27b8ca",null),S=w.exports,_=s(8345),b=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MyLayout-container",attrs:{placeholder:""}},[e("van-nav-bar",{attrs:{title:t.custom}}),e("div",[e("router-view")],1),e("van-tabbar",{attrs:{route:"","active-color":"#ee0a24","inactive-color":"#000",placeholder:""}},[e("van-tabbar-item",{attrs:{icon:"audio",to:"/layout/home",name:"首页"}},[t._v("听音乐")]),e("van-tabbar-item",{attrs:{icon:"search",to:"/layout/search",name:"搜索"}},[t._v("搜索")])],1)],1)},L=[],Z={data(){return{custom:this.$route.meta.title}},watch:{$route(){this.custom=this.$route.meta.title}}},C=Z,P=(0,y.Z)(C,b,L,!1,null,"ad12cd4e",null),k=P.exports,x=function(){var t=this,e=t._self._c;return e("div",{staticClass:"play"},[e("div",{staticClass:"song-bg",style:`background-image: url(${t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl}?imageView&thumbnail=360y360&quality=75&tostatic=0);`}),e("div",{staticClass:"header"},[e("van-icon",{staticClass:"left-incon",attrs:{name:"arrow-left",size:"20"},on:{click:function(e){return t.$router.back()}}})],1),e("div",{staticClass:"song-wrapper"},[e("div",{staticClass:"song-turn ani",style:"animation-play-state:"+(t.playState?"running":"paused")},[e("div",{staticClass:"song-img"},[e("img",{staticStyle:{width:"100%"},attrs:{src:`${t.songInfo&&t.songInfo.al&&t.songInfo.al.picUrl}?imageView&thumbnail=360y360&quality=75&tostatic=0`,alt:""}})])]),e("div",{staticClass:"start-box",on:{click:t.audioStart}},[e("span",{directives:[{name:"show",rawName:"v-show",value:!t.playState,expression:"!playState"}],staticClass:"song-start"})]),e("div",{staticClass:"song-msg"},[e("h2",{staticClass:"m-song-h2"},[e("span",{staticClass:"m-song-sname"},[t._v(t._s(t.songInfo.name)+"-"+t._s(t.songInfo&&t.songInfo.ar&&t.songInfo.ar[0].name))])]),e("div",{staticClass:"lrcContent"},[e("p",{staticClass:"lrc"},[t._v(t._s(t.curLyric))])])]),e("div",{staticClass:"needle",style:`transform: rotate(${t.needleDeg});`})]),e("audio",{ref:"audio",attrs:{preload:"true",src:`https://music.163.com/song/media/outer/url?id=${t.id}.mp3`}})])},I=[],$=s(6154);const O=$.Z.create({baseURL:"http://localhost:3000/"});var E=O;const z=function(t){return E.get("/song/detail",{params:{ids:t}})},M=function(t){return E.get("/lyric",{params:{id:t}})};var j={components:{[c.Z.name]:c.Z},name:"MyPlay",data(){return{playState:!1,id:this.$route.query.id,songInfo:{},lyric:{},curLyric:"",lastLy:""}},computed:{needleDeg(){return this.playState?"-7deg":"-38deg"}},methods:{async getSong(){const t=await z(this.id);this.songInfo=t.data.songs[0];const e=await M(this.id),s=e.data.lrc.lyric;this.lyric=this._formatLyr(s),this.curLyric=this.lyric[0]},_formatLyr(t){const e=/\[.+?\]/g,s=t.match(e),n=t.split(/\[.+?\]/).slice(1),a={};return s.forEach(((t,e)=>{const s=60*t.split(":")[0].split("")[2],i="0"===t.split(":")[1].split(".")[0].split("")[0]?t.split(":")[1].split(".")[0].split("")[1]:t.split(":")[1].split(".")[0];a[s+Number(i)]=n[e]})),console.log(a),a},audioStart(){this.playState?this.$refs.audio.pause():this.$refs.audio.play(),this.playState=!this.playState},showLyric(){this.$refs.audio.addEventListener("timeupdate",(()=>{const t=Math.floor(this.$refs.audio.currentTime);this.lyric[t]?(this.curLyric=this.lyric[t],this.lastLy=this.curLyric):this.curLyric=this.lastLy}))}},mounted(){this.getSong(),this.showLyric(),console.log(this.$route.query.id)}},q=j,N=(0,y.Z)(q,x,I,!1,null,"50a03f6d",null),R=N.exports,T=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MyHome-container"},[e("p",{staticClass:"title"},[t._v("推荐歌单")]),e("div",[e("van-row",{attrs:{gutter:"10"}},t._l(t.recommendlist,(function(s){return e("van-col",{key:s.id,attrs:{span:"8"}},[e("van-image",{attrs:{width:"100%",height:"3rem",fit:"contain",src:s.picUrl}}),e("P",{staticClass:"song_name"},[t._v(t._s(s.name))])],1)})),1)],1),e("p",{staticClass:"title"},[t._v("最新音乐")]),t._l(t.newSongList,(function(t){return e("SongItem",{key:t.id,attrs:{name:t.name,author:t.song.artists[0].name,id:t.id}})}))],2)},U=[];const D=function(){return E.get("/personalized",{params:{limit:6}})},A=function(){return E.get("/personalized/newsong",{params:{limit:10}})};var H=function(){var t=this,e=t._self._c;return e("van-cell",{attrs:{title:t.name,label:t.author},scopedSlots:t._u([{key:"right-icon",fn:function(){return[e("van-icon",{attrs:{name:"play-circle-o",size:"0.6rem"},on:{click:t.skipPlay}})]},proxy:!0}])})},V=[],F=(s(7658),{props:{name:String,id:Number,author:String},methods:{skipPlay(){this.$router.push({path:"/play",query:{id:this.id}})}}}),W=F,B=(0,y.Z)(W,H,V,!1,null,"2736b7d8",null),G=B.exports,J={components:{SongItem:G},data(){return{recommendlist:[],newSongList:[]}},methods:{async AcRecsongList(){const{data:t}=await D();this.recommendlist=t.result},async getNewSong(){const{data:t}=await A();this.newSongList=t.result}},created(){this.AcRecsongList(),this.getNewSong()}},K=J,Q=(0,y.Z)(K,T,U,!1,null,"513a59ea",null),X=Q.exports,Y=function(){var t=this,e=t._self._c;return e("div",{staticClass:"MySearch-container"},[e("van-search",{attrs:{placeholder:"高山青 (Live版) 那英",shape:"round"},on:{search:t.onSearch},model:{value:t.Search,callback:function(e){t.Search=e},expression:"Search"}}),0===t.resultList.length?e("div",{staticClass:"search_wrap"},[e("P",{staticClass:"hot_title"},[t._v("热门搜索")]),e("div",{staticClass:"hot_name_wrap"},t._l(t.hotSong,(function(s,n){return e("span",{key:n,staticClass:"hot_item",on:{click:function(e){return t.fn(s.first)}}},[t._v(t._s(s.first))])})),0)],1):e("div",{staticClass:"search_wrap"},[e("P",{staticClass:"hot_title"},[t._v("搜索结果")]),e("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(e){t.loading=e},expression:"loading"}},t._l(t.resultList,(function(t){return e("SongItem",{key:t.id,attrs:{name:t.name,author:t.ar[0].name,id:t.id}})})),1)],1)],1)},tt=[];const et=function(){return E.get("/search/hot")},st=function(t,e,s){return E.get("/cloudsearch",{params:{keywords:t,limit:e,offset:20*(s-1)}})};var nt={components:{SongItem:G},data(){return{hotSong:[],Search:"",resultList:[],loading:!1,finished:!1,page:1}},methods:{async getSearch(){const{data:t}=await et();this.hotSong=t.result.hots},async getSearchSong(){const{data:t}=await st(this.Search,20,this.page);this.resultList=t.result.songs},fn(t){this.Search=t,this.getSearchSong()},async onSearch(){if(0===this.Search.length)return void(this.resultList=[]);this.page=1;const{data:t}=await st(this.Search,20,this.page);console.log(t.result.songs),t.result.songs?(this.resultList=t.result.songs,this.finished=!1,this.loading=!1):this.resultList=[]},async onLoad(){this.page++;const{data:t}=await st(this.Search,20,this.page);t.result.songs?(this.resultList=[...this.resultList,...t.result.songs],this.loading=!1):this.finished=!0}},created(){this.getSearch()}},at=nt,it=(0,y.Z)(at,Y,tt,!1,null,"a912fb92",null),rt=it.exports;p.ZP.use(_.Z);const ot=[{path:"/",redirect:"/layout"},{path:"/layout",component:k,redirect:"/layout/home",children:[{path:"home",component:X,meta:{title:"首页"}},{path:"search",component:rt,meta:{title:"搜索"}}]},{path:"/play",component:R}],ct=new _.Z({routes:ot});var lt=ct;s(1305),s.p;p.ZP.use(d.Z),p.ZP.use(h.Z),p.ZP.use(u.Z),p.ZP.use(l.Z),p.ZP.use(c.Z),p.ZP.use(o.Z),p.ZP.use(r.Z),p.ZP.config.productionTip=!1,p.ZP.use(i.Z),p.ZP.use(a.Z),p.ZP.use(n.Z),new p.ZP({router:lt,render:t=>t(S)}).$mount("#app")},1305:function(){(function(t,e){const s=e.documentElement,n=t.devicePixelRatio||1;function a(){e.body?e.body.style.fontSize=12*n+"px":e.addEventListener("DOMContentLoaded",a)}function i(){const t=s.clientWidth/10;s.style.fontSize=t+"px"}if(a(),i(),t.addEventListener("resize",i),t.addEventListener("pageshow",(function(t){t.persisted&&i()})),n>=2){const t=e.createElement("body"),n=e.createElement("div");n.style.border=".5px solid transparent",t.appendChild(n),s.appendChild(t),1===n.offsetHeight&&s.classList.add("hairlines"),s.removeChild(t)}})(window,document)}},e={};function s(n){var a=e[n];if(void 0!==a)return a.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,s),i.exports}s.m=t,function(){var t=[];s.O=function(e,n,a,i){if(!n){var r=1/0;for(u=0;u<t.length;u++){n=t[u][0],a=t[u][1],i=t[u][2];for(var o=!0,c=0;c<n.length;c++)(!1&i||r>=i)&&Object.keys(s.O).every((function(t){return s.O[t](n[c])}))?n.splice(c--,1):(o=!1,i<r&&(r=i));if(o){t.splice(u--,1);var l=a();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,a,i]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.p=""}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,n){var a,i,r=n[0],o=n[1],c=n[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(a in o)s.o(o,a)&&(s.m[a]=o[a]);if(c)var u=c(s)}for(e&&e(n);l<r.length;l++)i=r[l],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(u)},n=self["webpackChunkwyy_music"]=self["webpackChunkwyy_music"]||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}();var n=s.O(void 0,[998],(function(){return s(9159)}));n=s.O(n)})();
//# sourceMappingURL=app.a71f7cea.js.map